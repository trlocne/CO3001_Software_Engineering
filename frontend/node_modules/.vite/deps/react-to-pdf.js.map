{
  "version": 3,
  "sources": ["../../react-to-pdf/dist/src/index.ts", "../../react-to-pdf/dist/src/converter.ts", "../../react-to-pdf/dist/src/constants.ts", "../../react-to-pdf/dist/src/utils.ts"],
  "sourcesContent": ["import { useRef, useCallback } from \"react\";\nimport html2canvas from \"html2canvas\";\n\nimport Converter from \"./converter\";\nimport { Options, TargetElementFinder, UsePDFResult } from \"./types\";\nimport { buildConvertOptions } from \"./utils\";\nimport jsPDF from \"jspdf\";\nexport { Resolution, Margin } from \"./constants\";\nexport type { Options };\n\nconst getTargetElement = (\n  targetRefOrFunction: TargetElementFinder\n): HTMLElement | null | undefined => {\n  if (typeof targetRefOrFunction === \"function\") {\n    return targetRefOrFunction();\n  }\n  return targetRefOrFunction?.current;\n};\n\nexport const usePDF = (usePDFoptions?: Options): UsePDFResult => {\n  const targetRef = useRef();\n  const toPDF = useCallback(\n    (toPDFoptions?: Options): Promise<InstanceType<typeof jsPDF>> => {\n      return generatePDF(targetRef, usePDFoptions ?? toPDFoptions);\n    },\n    [targetRef, usePDFoptions]\n  );\n  return { targetRef, toPDF };\n};\n\nconst generatePDF = async (\n  targetRefOrFunction: TargetElementFinder,\n  customOptions?: Options\n): Promise<InstanceType<typeof jsPDF>> => {\n  const options = buildConvertOptions(customOptions);\n  const targetElement = getTargetElement(targetRefOrFunction);\n  if (!targetElement) {\n    console.error(\"Unable to get the target element.\");\n    return;\n  }\n  const canvas = await html2canvas(targetElement, {\n    useCORS: options.canvas.useCORS,\n    logging: options.canvas.logging,\n    scale: options.resolution,\n    ...options.overrides?.canvas,\n  });\n  const converter = new Converter(canvas, options);\n  const pdf = converter.convert();\n  switch (options.method) {\n    case \"build\":\n      return pdf;\n    case \"open\": {\n      window.open(pdf.output(\"bloburl\"), \"_blank\");\n      return pdf;\n    }\n    case \"save\":\n    default: {\n      const pdfFilename = options.filename ?? `${new Date().getTime()}.pdf`;\n      await pdf.save(pdfFilename, { returnPromise: true });\n      return pdf;\n    }\n  }\n};\n\nexport default generatePDF;\n", "import jsPDF from \"jspdf\";\nimport { MM_TO_PX } from \"./constants\";\nimport { ConversionOptions, Options } from \"./types\";\n\nexport default class Converter {\n  pdf: InstanceType<typeof jsPDF>;\n  canvas: HTMLCanvasElement;\n  options: Options;\n  constructor(canvas: HTMLCanvasElement, options: ConversionOptions) {\n    this.canvas = canvas;\n    this.options = options;\n    this.pdf = new jsPDF({\n      format: this.options.page.format,\n      orientation: this.options.page.orientation,\n      ...this.options.overrides?.pdf,\n      unit: \"mm\",\n    });\n  }\n  getMarginTopMM() {\n    const margin =\n      typeof this.options.page.margin === \"object\"\n        ? this.options.page.margin.top\n        : this.options.page.margin;\n    return Number(margin);\n  }\n  getMarginLeftMM() {\n    const margin =\n      typeof this.options.page.margin === \"object\"\n        ? this.options.page.margin.left\n        : this.options.page.margin;\n    return Number(margin);\n  }\n  getMarginRightMM() {\n    const margin =\n      typeof this.options.page.margin === \"object\"\n        ? this.options.page.margin.right\n        : this.options.page.margin;\n    return Number(margin);\n  }\n  getMarginBottomMM() {\n    const margin =\n      typeof this.options.page.margin === \"object\"\n        ? this.options.page.margin.bottom\n        : this.options.page.margin;\n    return Number(margin);\n  }\n  getMarginTop() {\n    return this.getMarginTopMM() * MM_TO_PX;\n  }\n  getMarginBottom() {\n    return this.getMarginBottomMM() * MM_TO_PX;\n  }\n  getMarginLeft() {\n    return this.getMarginLeftMM() * MM_TO_PX;\n  }\n  getMarginRight() {\n    return this.getMarginRightMM() * MM_TO_PX;\n  }\n  getScale() {\n    return this.options.resolution;\n  }\n  getPageHeight() {\n    return this.getPageHeightMM() * MM_TO_PX;\n  }\n  getPageHeightMM() {\n    return this.pdf.internal.pageSize.height;\n  }\n  getPageWidthMM() {\n    return this.pdf.internal.pageSize.width;\n  }\n  getPageWidth() {\n    return this.getPageWidthMM() * MM_TO_PX;\n  }\n  getOriginalCanvasWidth() {\n    return this.canvas.width / this.getScale();\n  }\n  getOriginalCanvasHeight() {\n    return this.canvas.height / this.getScale();\n  }\n  getCanvasPageAvailableHeight() {\n    return (\n      this.getPageAvailableHeight() *\n      this.getScale() *\n      this.getHorizontalFitFactor()\n    );\n  }\n  getPageAvailableWidth() {\n    return this.getPageWidth() - (this.getMarginLeft() + this.getMarginRight());\n  }\n  getPageAvailableHeight() {\n    return (\n      this.getPageHeight() - (this.getMarginTop() + this.getMarginBottom())\n    );\n  }\n  getPageAvailableWidthMM() {\n    return this.getPageAvailableWidth() / MM_TO_PX;\n  }\n  getPageAvailableHeightMM() {\n    return this.getPageAvailableHeight() / MM_TO_PX;\n  }\n  getNumberPages() {\n    return Math.ceil(this.canvas.height / this.getCanvasPageAvailableHeight());\n  }\n  getHorizontalFitFactor() {\n    if (this.getPageAvailableWidth() < this.getOriginalCanvasWidth()) {\n      return this.getOriginalCanvasWidth() / this.getPageAvailableWidth();\n    }\n    return 1;\n  }\n  getCanvasOffsetY(pageNumber: number) {\n    return this.getCanvasPageAvailableHeight() * (pageNumber - 1);\n  }\n  getCanvasHeightLeft(pageNumber: number) {\n    return this.canvas.height - this.getCanvasOffsetY(pageNumber);\n  }\n  getCanvasPageHeight(pageNumber: number) {\n    if (this.canvas.height < this.getCanvasPageAvailableHeight()) {\n      return this.canvas.height;\n    }\n    const canvasHeightPending = this.getCanvasHeightLeft(pageNumber);\n    return canvasHeightPending < this.getCanvasPageAvailableHeight()\n      ? canvasHeightPending\n      : this.getCanvasPageAvailableHeight();\n  }\n  getCanvasPageWidth() {\n    return this.canvas.width;\n  }\n  createCanvasPage(pageNumber: number): HTMLCanvasElement {\n    const canvasPageWidth = this.getCanvasPageWidth();\n    const canvasPageHeight = this.getCanvasPageHeight(pageNumber);\n    const canvasPage = document.createElement(\"canvas\");\n    canvasPage.setAttribute(\"width\", String(canvasPageWidth));\n    canvasPage.setAttribute(\"height\", String(canvasPageHeight));\n    const ctx = canvasPage.getContext(\"2d\");\n    ctx.drawImage(\n      this.canvas,\n      0,\n      this.getCanvasOffsetY(pageNumber),\n      this.canvas.width,\n      canvasPageHeight,\n      0,\n      0,\n      this.canvas.width,\n      canvasPageHeight\n    );\n    return canvasPage;\n  }\n  convert(): InstanceType<typeof jsPDF> {\n    let pageNumber = 1;\n    const numberPages = this.getNumberPages();\n    while (pageNumber <= numberPages) {\n      if (pageNumber > 1) {\n        this.pdf.addPage(\n          this.options.page.format,\n          this.options.page.orientation\n        );\n      }\n      const canvasPage = this.createCanvasPage(pageNumber);\n      const pageImageDataURL = canvasPage.toDataURL(\n        this.options.canvas.mimeType,\n        this.options.canvas.qualityRatio\n      );\n      this.pdf.setPage(pageNumber);\n      this.pdf.addImage({\n        imageData: pageImageDataURL,\n        width:\n          canvasPage.width /\n          (this.getScale() * MM_TO_PX * this.getHorizontalFitFactor()),\n        height:\n          canvasPage.height /\n          (this.getScale() * MM_TO_PX * this.getHorizontalFitFactor()),\n        x: this.getMarginLeftMM(),\n        y: this.getMarginTopMM(),\n      });\n      pageNumber += 1;\n    }\n    return this.pdf;\n  }\n}\n", "import { ConversionOptions } from \"./types\";\n\nexport const MM_TO_PX = 3.77952755906;\n\nexport enum Resolution {\n  LOW = 1,\n  NORMAL = 2,\n  MEDIUM = 3,\n  HIGH = 7,\n  EXTREME = 12,\n}\n\nexport enum Margin {\n  NONE = 0,\n  SMALL = 5,\n  MEDIUM = 10,\n  LARGE = 25,\n}\n\nexport const DEFAULT_OPTIONS: Readonly<ConversionOptions> = {\n  method: \"save\",\n  resolution: Resolution.MEDIUM,\n  page: {\n    margin: Margin.NONE,\n    format: \"A4\",\n    orientation: \"portrait\",\n  },\n  canvas: {\n    mimeType: \"image/jpeg\",\n    qualityRatio: 1,\n    useCORS: true,\n    logging: false,\n  },\n  overrides: {},\n};\n", "import { DEFAULT_OPTIONS } from \"./constants\";\nimport { ConversionOptions, Options } from \"./types\";\n\nexport const buildConvertOptions = (options?: Options): ConversionOptions => {\n  if (!options) {\n    return DEFAULT_OPTIONS;\n  }\n  return {\n    ...DEFAULT_OPTIONS,\n    ...options,\n    canvas: { ...DEFAULT_OPTIONS.canvas, ...options.canvas },\n    page: { ...DEFAULT_OPTIONS.page, ...options.page },\n  };\n};\n"],
  "mappings": "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",
  "names": ["$hgUW1$useRef", "$hgUW1$useCallback"]
}
